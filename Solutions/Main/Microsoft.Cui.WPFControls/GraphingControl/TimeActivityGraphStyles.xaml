<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Microsoft.Cui.Controls"    
    >

    <!-- Begin Time Activity Graph -->
    <Style TargetType="local:TimeActivityGraph">
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="BorderBrush" Value="#FFC0C0C0" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:TimeActivityGraph">
                    <Grid Height="{TemplateBinding Height}" Width="{TemplateBinding Width}" MaxHeight="{TemplateBinding MaxHeight}">
                        <Border BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" CornerRadius="4">
                            <Grid x:Name="ELEMENT_layoutRoot" Background="{TemplateBinding Background}" Cursor="{TemplateBinding Cursor}">
                                <Grid.Resources>
                                    <DataTemplate x:Key="ELEMENT_dynamicMainLayerTemplate">
                                        <Grid x:Name="ELEMENT_dynamicMainLayer">
                                            <Canvas Canvas.ZIndex="10" VerticalAlignment="Top" x:Name="ELEMENT_dynamicTopAxisLayerViewport" Height="30">
                                                <Canvas x:Name="ELEMENT_dynamicTopAxisLayer">

                                                </Canvas>
                                            </Canvas>
                                            <Canvas Canvas.ZIndex="5" x:Name="ELEMENT_dynamicPlotLayerViewport" Margin="0,30,0,0">
                                                <Canvas x:Name="ELEMENT_dynamicPlotLayer">
                                                </Canvas>
                                                <Canvas x:Name="ELEMENT_minimizedPlotLayer" Visibility="Collapsed" Height="20"/>
                                            </Canvas>
                                        </Grid>
                                    </DataTemplate>
                                    <DataTemplate x:Key="Element_MinimizedViewLine">
                                        <Line X1="{Binding X1Pixel}" X2="{Binding X2Pixel}" Y1="{Binding Y1Pixel}" Y2="{Binding Y1Pixel}" Stroke="#4A7EBB" />
                                    </DataTemplate>
                                    <DataTemplate x:Key="ELEMENT_collisionTemplate">
                                        <Grid Canvas.ZIndex="6" Opacity="0.6" Width="23" Height="19"  local:GraphBase.XOffset="0" local:GraphBase.YOffset="-23">
                                            <Path Margin="0.4,0.4,0.2,0.2" Fill="#FFF3F500" Stretch="Fill" Stroke="#FF000000" Data="M0.75,14.125 C17.375,14.125 17.125,14.125 17.125,14.125 L9.1251093,0.125 z" StrokeStartLineCap="Round" StrokeEndLineCap="Round" StrokeLineJoin="Round" StrokeThickness="1.2"/>
                                            <Path RenderTransformOrigin="0,0" Margin="10.25,6.125,9.75,2.75" Fill="#FF000000" Stretch="Fill" Data="M1.9921874,9.7406769 C2.2382813,9.7406769 2.4482422,9.8256378 2.6220703,9.9955597 C2.7958984,10.165482 2.8828125,10.371536 2.8828125,10.613724 C2.8828125,10.887161 2.7949219,11.102005 2.6191406,11.258255 C2.4433594,11.414505 2.2382813,11.49263 2.0039063,11.49263 C1.765625,11.49263 1.5576172,11.415482 1.3798828,11.261185 C1.2910156,11.184036 1.2243652,11.091507 1.1799316,10.983597 C1.135498,10.875687 1.1132813,10.752396 1.1132813,10.613724 C1.1132813,10.371536 1.1982422,10.165482 1.3681641,9.9955597 C1.5380859,9.8256378 1.7460938,9.7406769 1.9921874,9.7406769 z M2.0390625,2.6215363 C2.2070313,2.6215363 2.347168,2.650589 2.4594727,2.7086945 C2.5717773,2.7667999 2.65625,2.8539581 2.7128906,2.9701691 C2.7695313,3.08638 2.8120117,3.2282257 2.840332,3.3957062 C2.8686523,3.5631866 2.8828125,3.7563019 2.8828125,3.9750519 C2.8828125,4.2328644 2.8691406,4.4945831 2.8417969,4.7602081 L2.5898438,7.64888 C2.5625,7.99263 2.5039063,8.2563019 2.4140625,8.4398956 C2.3691406,8.5316925 2.3095703,8.6005402 2.2353516,8.6464386 C2.1611328,8.692337 2.0722656,8.7152863 1.96875,8.7152863 C1.8632813,8.7152863 1.7739258,8.6930695 1.7006836,8.6486359 C1.6274414,8.6042023 1.5703125,8.5375519 1.5292969,8.4486847 C1.4882813,8.3598175 1.453125,8.247757 1.4238281,8.1125031 C1.3945313,7.9772491 1.3710938,7.8188019 1.3535156,7.6371613 L1.1660156,4.8305206 C1.1484375,4.5570831 1.1352539,4.3222198 1.1264648,4.1259308 C1.1176758,3.9296417 1.1132813,3.7719269 1.1132813,3.6527863 C1.1132813,3.3285675 1.1982422,3.0756378 1.3681641,2.8939972 C1.453125,2.8031769 1.5515137,2.7350616 1.6633301,2.6896515 C1.7751465,2.6442413 1.9003906,2.6215363 2.0390625,2.6215363 z">
                                                <Path.RenderTransform>
                                                    <TransformGroup>
                                                        <ScaleTransform ScaleX="1" ScaleY="1"/>
                                                        <SkewTransform AngleX="0" AngleY="0"/>
                                                        <RotateTransform Angle="0"/>
                                                        <TranslateTransform X="0" Y="0"/>
                                                    </TransformGroup>
                                                </Path.RenderTransform>
                                            </Path>
                                            <ToolTipService.ToolTip>
                                                <ToolTip>
                                                    <ToolTip.Content>
                                                        <StackPanel Width="125" Margin="5,0,5,0">
                                                            <TextBlock FontWeight="Bold" HorizontalAlignment="Left" TextWrapping="Wrap" Text="Overcrowded data"></TextBlock>
                                                            <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap"><Run Text="Adjust your timescale to see this data."/></TextBlock>
                                                        </StackPanel>
                                                    </ToolTip.Content>
                                                </ToolTip>
                                            </ToolTipService.ToolTip>
                                        </Grid>
                                    </DataTemplate>
                                    <DataTemplate x:Key="ELEMENT_dataMarkerTemplate">
                                        <Rectangle Canvas.ZIndex="10" Height="5" Width="5" Fill="Blue" Stroke="Black" StrokeThickness="3" local:GraphBase.XOffset="-2.5" local:GraphBase.YOffset="-2.5" />
                                    </DataTemplate>
                                    <DataTemplate x:Key="ELEMENT_PointTemplate">
                                        <local:GraphPoint Canvas.ZIndex="9999" X1="{Binding StartDate}" X2="{Binding EndDate}" DataMarkerTemplate="{Binding DataMarkerTemplate}" />
                                    </DataTemplate>
                                    <DataTemplate x:Key="ELEMENT_LabelTemplate">
                                        <local:MedicationLabel MedicationName="{Binding Path=DataContext.AdditionalInformation.MedicationName}" 
                                                                       Dose="{Binding Path=DataContext.AdditionalInformation.Dose}" 
                                                                       Frequency="{Binding Path=DataContext.AdditionalInformation.Frequency}" 
                                                                       Route="{Binding Path=DataContext.AdditionalInformation.Route}"
                                                                       BorderThickness="1" 
                                                                       Padding="1" />                                       
                                    </DataTemplate>
                                    <ScaleTransform x:Key="ELEMENT_LabelTransform" ScaleX="1.4" ScaleY="1.4">
                                    </ScaleTransform>
                                    <DataTemplate x:Key="ELEMENT_XAxisLabelTemplate">
                                        <TextBlock FontSize="11" />
                                    </DataTemplate>
                                    <DataTemplate x:Key="ELEMENT_YAxisLabelTemplate">
                                        <TextBlock FontSize="11" />
                                    </DataTemplate>
                                    <local:TimeFrequency x:Key="DefaultVisibleWindow" Unit="Minute" Value="5" />
                                </Grid.Resources>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="20"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="0" />
                                </Grid.ColumnDefinitions>                                

                                <Grid Grid.Row="0" Margin="5,0,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Border BorderBrush="Gray" BorderThickness="1,0,1,1" Grid.Column="0">
                                        <TextBlock Text="" x:Name="ELEMENT_XAxisTitleStartDate" FontSize="14" />
                                    </Border>
                                    <Border BorderBrush="Gray" BorderThickness="1,0,1,1" Grid.Column="2">
                                        <TextBlock Text="" x:Name="ELEMENT_XAxisTitleEndDate" HorizontalAlignment="Right" FontSize="14"/>
                                    </Border>
                                </Grid>

                                <Canvas x:Name="ELEMENT_dynamicMainLayerViewport" 
                                        Grid.Row="1" Canvas.ZIndex="10" Margin="5,0,0,5" 
                                        MinHeight="{TemplateBinding PlotAreaHeight}"
                                        Background="Transparent"
                                        />

                                <Canvas Grid.Row="1" Canvas.ZIndex="5" Margin="5,30,0,5" x:Name="ELEMENT_nonDynamicRightAxisViewPort" Background="Transparent">
                                    <Canvas x:Name="ELEMENT_NonDynamicRightAxisLabels">
                                    </Canvas>
                                    <Canvas x:Name="ELEMENT_NonDynamicRightAxisLines">
                                    </Canvas>
                                </Canvas>
                                
                                <Canvas Grid.Row="1" x:Name="ELEMENT_FutureCanvas" Canvas.ZIndex="6" 
                                        Background="LightGray" Margin="5,30,0,5" Visibility="Collapsed" 
                                        HorizontalAlignment="Right" Opacity="0.3" IsHitTestVisible="False" />

                                <Canvas Grid.Row="1" Canvas.ZIndex="15" Margin="5,30,0,5" x:Name="ELEMENT_LabelsLayerViewPort">
                                    <Canvas x:Name="Element_LabelsLayer"  />
                                </Canvas>

                                <ScrollBar Grid.Row="1" Margin="2,30,2,5" Orientation="Vertical" Grid.Column="1" Minimum="-155" Maximum="155" Value="0" SmallChange="5" LargeChange="10" x:Name="ELEMENT_scrollBarVertical" Visibility="Collapsed"/>
                                <ScrollBar Orientation="Horizontal" Margin="2,2,2,2" Grid.Row="2" x:Name="ELEMENT_scrollBar"/>

                            </Grid>
                        </Border>
                        <Rectangle x:Name="FocusVisualElement" Opacity="0" IsHitTestVisible="False" StrokeThickness="1" Stroke="Black" StrokeDashArray="3 4" Margin="1, 1, 1, 1" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!-- End Time Activity Graph  -->   
   
    <!-- Begin TimeLineMedicationLabel -->
    <Style TargetType="local:MedicationLabel">
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Padding" Value="3,2,3,2" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="BorderBrush" Value="#FFC0C0C0" />        
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:MedicationLabel">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="LabelStates">
                                <VisualState x:Name="SimpleMode">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="Simple"
                                                                       Storyboard.TargetProperty="Visibility"
                                                                       >
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="Partial"
                                                                       Storyboard.TargetProperty="Visibility"
                                                                       >
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="Full"
                                                                       Storyboard.TargetProperty="Visibility"
                                                                       >
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="PartialMode">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="Simple"
                                                                       Storyboard.TargetProperty="Visibility"
                                                                       >
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="Partial"
                                                                       Storyboard.TargetProperty="Visibility"
                                                                       >
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="Full"
                                                                       Storyboard.TargetProperty="Visibility"
                                                                       >
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="FullMode">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="Simple"
                                                                       Storyboard.TargetProperty="Visibility"
                                                                       >
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="Partial"
                                                                       Storyboard.TargetProperty="Visibility"
                                                                       >
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="Full"
                                                                       Storyboard.TargetProperty="Visibility"
                                                                       >
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>                                
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid.Resources>
                            <local:NullEmptyToVisibilityConverter x:Key="NullEmptyToVisibilityConverter" />
                        </Grid.Resources>
                        <Border x:Name="Simple"
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                Background="White"
                                BorderBrush="{TemplateBinding BorderBrush}"                                 
                                Padding="{TemplateBinding Padding}"                                   
                                HorizontalAlignment="Left"
                                Width="Auto"
                                Margin="1,0">
                            <local:Label x:Name="SimpleLabel" IsTabStop="False" TextWrapping="NoWrap" ShowHandOnHover="False"  
                                         Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=MedicationName, Mode=OneWay}"/>
                            <ToolTipService.ToolTip>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{TemplateBinding MedicationName}" />
                                    <TextBlock Text=", "
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                       />
                                    <TextBlock Text="{TemplateBinding BrandName}"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                       />

                                    <TextBlock Text="  "
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                       />
                                    <TextBlock Text="{TemplateBinding FluidStrength}"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                       />

                                    <TextBlock Text=", "
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=SolidStrength}"
                                       />
                                    <TextBlock Text="{TemplateBinding SolidStrength}"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=SolidStrength}"
                                       />
                                    
                                    <TextBlock Text=", "
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Dose}"
                                       />
                                    <TextBlock Text="{TemplateBinding DoseLabel}" VerticalAlignment="Bottom"
                                       FontFamily="Courier New" Margin="0,2,3,0"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Dose}"
                                       />
                                    <TextBlock Text="{TemplateBinding Dose}"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Dose}"
                                       />

                                    <TextBlock Text=", "
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=DoseDuration}"
                                       />
                                    <TextBlock Text="{TemplateBinding DoseDuration}"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=DoseDuration}"
                                       />

                                    <TextBlock Text=", "
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Rate}"
                                       />
                                    <TextBlock Text="{TemplateBinding Rate}"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Rate}"
                                       />

                                    <TextBlock Text=", "
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Route}"
                                       />
                                    <TextBlock Text="{TemplateBinding Route}"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Route}"
                                       />

                                    <TextBlock Text=", "
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Frequency}"
                                       />
                                    <TextBlock Text="{TemplateBinding Frequency}"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Frequency}"
                                       />

                                    <TextBlock Text=", "
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Form}"
                                       />
                                    <TextBlock Text="{TemplateBinding Form}"
                                       Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Form}"
                                       />
                                </StackPanel>
                            </ToolTipService.ToolTip>
                        </Border>
                        <Border x:Name="Partial" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                Background="White"
                                BorderBrush="{TemplateBinding BorderBrush}"                                 
                                Padding="{TemplateBinding Padding}"                                   
                                HorizontalAlignment="Left"
                                Width="Auto"
                                Margin="1,0"                                
                                >
                            <StackPanel Orientation="Horizontal">
                                <StackPanel x:Name="PartialModeMedicationName" Orientation="Horizontal">
                                    <TextBlock Text="{TemplateBinding MedicationName}" FontWeight="Bold" />
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                           />
                                    <TextBlock Text="{TemplateBinding BrandName}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                           />
                                    <TextBlock Text="  "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                           />
                                    <TextBlock Text="{TemplateBinding FluidStrength}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                           />
                                </StackPanel>
                                <StackPanel x:Name="PartialModeEllipsis">
                                    <TextBlock Text="..." />
                                </StackPanel>
                            </StackPanel>
                            <ToolTipService.ToolTip>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{TemplateBinding MedicationName}" FontWeight="Bold" />
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                           />
                                    <TextBlock Text="{TemplateBinding BrandName}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                           />
                                    <TextBlock Text="  "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                           />
                                    <TextBlock Text="{TemplateBinding FluidStrength}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                           />
                                </StackPanel>
                            </ToolTipService.ToolTip>
                        </Border>
                        <Border x:Name="Full" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                Background="White"
                                BorderBrush="{TemplateBinding BorderBrush}"                                 
                                Padding="{TemplateBinding Padding}"                                   
                                HorizontalAlignment="Left"
                                Width="Auto"
                                Margin="1,0"                                
                                >                                                        
                            <StackPanel Orientation="Horizontal">
                                <StackPanel x:Name="MedicationName" Orientation="Horizontal">
                                    <TextBlock Text="{TemplateBinding MedicationName}" FontWeight="Bold" />
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                           />
                                    <TextBlock Text="{TemplateBinding BrandName}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                           />
                                    <TextBlock Text="  "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                           />
                                    <TextBlock Text="{TemplateBinding FluidStrength}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                           />
                                </StackPanel>
                                <StackPanel x:Name="Ellipsis">
                                    <TextBlock Text="..." />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" x:Name="MedicationDetails">
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=SolidStrength}"
                                           />
                                    <TextBlock Text="{TemplateBinding SolidStrength}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=SolidStrength}"
                                           />
                                    
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Form}"
                                           />
                                    <TextBlock Text="{TemplateBinding Form}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Form}"
                                           />
                                    
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Dose}"
                                           />
                                    <TextBlock Text="{TemplateBinding DoseLabel}"
                                           Foreground="Blue" FontFamily="Courier New" Margin="0,1,3,0"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Dose}"
                                           />
                                    <TextBlock Text="{TemplateBinding Dose}" FontWeight="Bold"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Dose}"
                                           />
                                    
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=DoseDuration}"
                                           />
                                    <TextBlock Text="{TemplateBinding DoseDuration}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=DoseDuration}"
                                           />
                                    
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Rate}"
                                           />
                                    <TextBlock Text="{TemplateBinding Rate}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Rate}"
                                           />
                                    
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Route}"
                                           />
                                    <TextBlock Text="{TemplateBinding Route}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Route}"
                                           />
                                    
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Frequency}"
                                           />
                                    <TextBlock Text="{TemplateBinding Frequency}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Frequency}"
                                           />
                                </StackPanel>
                            </StackPanel>
                            <ToolTipService.ToolTip>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{TemplateBinding MedicationName}" FontWeight="Bold" />
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                           />
                                    <TextBlock Text="{TemplateBinding BrandName}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=BrandName}"
                                           />

                                    <TextBlock Text="  "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                           />
                                    <TextBlock Text="{TemplateBinding FluidStrength}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=FluidStrength}"
                                           />
                                    
                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=SolidStrength}"
                                           />
                                    <TextBlock Text="{TemplateBinding SolidStrength}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=SolidStrength}"
                                           />

                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Form}"
                                           />
                                    <TextBlock Text="{TemplateBinding Form}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Form}"
                                           />

                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Dose}"
                                           />
                                    <TextBlock Text="{TemplateBinding DoseLabel}" VerticalAlignment="Bottom"
                                           Foreground="Blue" FontFamily="Courier New" Margin="0,2,3,0"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Dose}"
                                           />
                                    <TextBlock Text="{TemplateBinding Dose}" FontWeight="Bold"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Dose}"
                                           />

                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=DoseDuration}"
                                           />
                                    <TextBlock Text="{TemplateBinding DoseDuration}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=DoseDuration}"
                                           />

                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Rate}"
                                           />
                                    <TextBlock Text="{TemplateBinding Rate}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Rate}"
                                           />

                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Route}"
                                           />
                                    <TextBlock Text="{TemplateBinding Route}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Route}"
                                           />

                                    <TextBlock Text=" — "
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Frequency}"
                                           />
                                    <TextBlock Text="{TemplateBinding Frequency}"
                                           Visibility="{Binding Converter={StaticResource NullEmptyToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Path=Frequency}"
                                           />
                                </StackPanel>
                            </ToolTipService.ToolTip>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!-- End TimeLineMedicationLabel -->
    
    <!-- Begin Time Activity GraphHost -->
    <Style TargetType="local:TimeActivityGraphHost">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:TimeActivityGraphHost">
                    <Grid>
                        <Border Margin="2,2,2,2"  VerticalAlignment="Stretch" HorizontalAlignment="Stretch" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2">
                            <Grid x:Name="ELEMENT_LayoutRoot" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                                <Grid.Resources>
                                    <local:TimeFrequencyBindingHelper x:Key="timeFrequency" />
                                    <local:TimeFrequency x:Key="DefaultVisibleWindow" Unit="Minute" Value="5" />

                                    <SolidColorBrush Color="#FF3A3A3A" x:Key="SectionHeader_Foreground_Brush" />
                                    <SolidColorBrush x:Key="Control_Background_Brush" Color="#FFFFFFFF" />
                                    <SolidColorBrush x:Key="Control_Foreground_Brush" Color="#FF000000" />
                                    <SolidColorBrush x:Key="Control_BorderBrush_Brush" Color="#FF9A9A9A" />
                                    <SolidColorBrush x:Key="ToolbarButton_Foreground_Brush" Color="White" />

                                    <SolidColorBrush x:Key="ToolbarButton_BorderBrush_Brush" Color="#66FFFFFF" />
                                    <LinearGradientBrush x:Key="ToolbarButton_MouseOverBackground_Brush" EndPoint="0.5,0" StartPoint="0.5,0.791">
                                        <GradientStop Color="#00DADADA" Offset="0.004"/>
                                        <GradientStop Color="#99FFFFFF" Offset="1"/>
                                    </LinearGradientBrush>
                                    <LinearGradientBrush x:Key="ToolbarButton_PressedBackground_Brush" EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#33616161"/>
                                        <GradientStop Color="#99616161" Offset="1"/>
                                    </LinearGradientBrush>

                                    <LinearGradientBrush x:Key="SectionHeader_Background_Brush" EndPoint="0.5,0" StartPoint="0.5,1">
                                        <GradientStop Color="#FF3A3A3A" Offset="0.05"/>
                                        <GradientStop Color="#FFFFFFFF" Offset="1"/>
                                        <GradientStop Color="#FF9FBFD1" Offset="0.05"/>
                                        <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                    </LinearGradientBrush>

                                    <RadialGradientBrush x:Key="EllipseFill">
                                        <GradientStop Color="#FF000000"/>
                                        <GradientStop Color="#00000000" Offset="1"/>
                                    </RadialGradientBrush>

                                    <SolidColorBrush x:Key="EllipseStroke" Color="#00000000"/>

                                    <Style TargetType="local:TimeLineGraph" x:Key="TopAxisStyle">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate>
                                                    <Border>
                                                        <Grid x:Name="ELEMENT_layoutRoot" Background="{TemplateBinding Background}">
                                                            <Grid.Resources>
                                                                <DataTemplate x:Key="ELEMENT_dynamicMainLayerTemplate">
                                                                    <Grid x:Name="ELEMENT_dynamicMainLayer">
                                                                        <Canvas Background="Transparent" Canvas.ZIndex="10" VerticalAlignment="Top" x:Name="ELEMENT_dynamicTopAxisLayerViewport" Height="30">
                                                                            <Canvas x:Name="ELEMENT_dynamicTopAxisLayer" >

                                                                            </Canvas>
                                                                        </Canvas>
                                                                        <Canvas Canvas.ZIndex="5" x:Name="ELEMENT_dynamicPlotLayerViewport">
                                                                            <Canvas x:Name="ELEMENT_dynamicPlotLayer">
                                                                            </Canvas>
                                                                        </Canvas>
                                                                    </Grid>
                                                                </DataTemplate>
                                                                <DataTemplate x:Key="ELEMENT_dataMarkerTemplate">
                                                                    <Rectangle Canvas.ZIndex="10" Height="5" Width="5" Fill="Blue" Stroke="Black" StrokeThickness="3" local:GraphBase.XOffset="-2.5" local:GraphBase.YOffset="-2.5" />
                                                                </DataTemplate>
                                                                <DataTemplate x:Key="ELEMENT_PointTemplate">
                                                                    <local:GraphPoint Canvas.ZIndex="9999" Y1="{Binding Y1}" Y2="{Binding Y2}" X1="{Binding DateTime}"/>
                                                                </DataTemplate>
                                                                <DataTemplate x:Key="ELEMENT_XAxisLabelTemplate">
                                                                    <TextBlock FontSize="11" />
                                                                </DataTemplate>
                                                                <DataTemplate x:Key="ELEMENT_YAxisLabelTemplate">
                                                                    <TextBlock FontSize="11" />
                                                                </DataTemplate>
                                                                <local:TimeFrequency x:Key="DefaultVisibleWindow" Unit="Minute" Value="5" />
                                                            </Grid.Resources>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="0"/>
                                                                <RowDefinition Height="20"/>
                                                                <RowDefinition Height="*"/>
                                                                <RowDefinition Height="0"/>
                                                            </Grid.RowDefinitions>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="185"/>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="36" />
                                                            </Grid.ColumnDefinitions>

                                                            <Grid Grid.Row="1" Grid.Column="1">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto" />
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>
                                                                <Border BorderBrush="Gray" Padding="3,1,3,1" BorderThickness="1,0,1,1" Grid.Column="0">
                                                                    <TextBlock Text="" x:Name="ELEMENT_XAxisTitleStartDate" FontSize="14" />
                                                                </Border>
                                                                <Border BorderBrush="Gray" Padding="3,1,3,1" BorderThickness="1,0,1,1" Grid.Column="2">
                                                                    <TextBlock Text="" x:Name="ELEMENT_XAxisTitleEndDate" HorizontalAlignment="Right" FontSize="14"/>
                                                                </Border>
                                                            </Grid>

                                                            <Canvas Grid.Row="2" Grid.Column="1" Canvas.ZIndex="10" Margin="1,0,0,0" x:Name="ELEMENT_dynamicMainLayerViewport"/>
                                                            <Canvas Visibility="Collapsed" Grid.Row="2" Grid.Column="1" Canvas.ZIndex="5" Margin="1,0,0,0" x:Name="ELEMENT_nonDynamicRightAxisViewPort">
                                                                <Canvas x:Name="ELEMENT_NonDynamicRightAxisLabels">
                                                                </Canvas>
                                                                <Canvas x:Name="ELEMENT_NonDynamicRightAxisLines">
                                                                </Canvas>
                                                            </Canvas>
                                                            <Border Grid.Row="1" Grid.RowSpan="2" Grid.Column="1" Opacity="0.5"
                                                                    BorderThickness="1,0,1,0" BorderBrush="{StaticResource Control_BorderBrush_Brush}" />

                                                            <ScrollBar  Visibility="Collapsed" Grid.Row="2" Margin="2,2,2,2" Orientation="Vertical" Grid.Column="2" Minimum="-155" Maximum="155" Value="0" SmallChange="5" LargeChange="10" x:Name="ELEMENT_scrollBarVertical"/>
                                                            <ScrollBar  Visibility="Visible" Margin="2,2,2,2" Grid.Row="3" x:Name="ELEMENT_scrollBar"/>

                                                        </Grid>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>

                                    <Style TargetType="local:TimeLineGraph" x:Key="BottomAxisStyle">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate>
                                                    <Border BorderThickness="0" BorderBrush="Gray" CornerRadius="4">
                                                        <Grid x:Name="ELEMENT_layoutRoot" Background="{TemplateBinding Background}">
                                                            <Grid.Resources>
                                                                <DataTemplate x:Key="ELEMENT_dynamicMainLayerTemplate">
                                                                    <Grid x:Name="ELEMENT_dynamicMainLayer">
                                                                        <Canvas Background="Transparent" Canvas.ZIndex="10" VerticalAlignment="Top" x:Name="ELEMENT_dynamicTopAxisLayerViewport" Height="30">
                                                                            <Canvas x:Name="ELEMENT_dynamicTopAxisLayer" >

                                                                            </Canvas>
                                                                        </Canvas>
                                                                        <Canvas Canvas.ZIndex="5" x:Name="ELEMENT_dynamicPlotLayerViewport">
                                                                            <Canvas x:Name="ELEMENT_dynamicPlotLayer">
                                                                            </Canvas>
                                                                        </Canvas>
                                                                    </Grid>
                                                                </DataTemplate>
                                                                <DataTemplate x:Key="ELEMENT_dataMarkerTemplate">
                                                                    <Rectangle Canvas.ZIndex="10" Height="5" Width="5" Fill="Blue" Stroke="Black" StrokeThickness="3" local:GraphBase.XOffset="-2.5" local:GraphBase.YOffset="-2.5" />
                                                                </DataTemplate>
                                                                <DataTemplate x:Key="ELEMENT_PointTemplate">
                                                                    <local:GraphPoint Canvas.ZIndex="9999" Y1="{Binding Y1}" Y2="{Binding Y2}" X1="{Binding DateTime}"/>
                                                                </DataTemplate>
                                                                <DataTemplate x:Key="ELEMENT_XAxisLabelTemplate">
                                                                    <TextBlock FontSize="11" />
                                                                </DataTemplate>
                                                                <DataTemplate x:Key="ELEMENT_YAxisLabelTemplate">
                                                                    <TextBlock FontSize="11" />
                                                                </DataTemplate>
                                                                <local:TimeFrequency x:Key="DefaultVisibleWindow" Unit="Minute" Value="5" />
                                                            </Grid.Resources>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="0"/>
                                                                <RowDefinition Height="*"/>
                                                                <RowDefinition Height="20"/>
                                                                <RowDefinition Height="0"/>
                                                            </Grid.RowDefinitions>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="185"/>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="36" />
                                                            </Grid.ColumnDefinitions>

                                                            <Grid Grid.Row="2" Grid.Column="1" Margin="0,0,0,0">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto" />
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>
                                                                <Border BorderBrush="Gray" Padding="3,1,3,1" BorderThickness="1,1,1,0" Grid.Column="0">
                                                                    <TextBlock Text="" x:Name="ELEMENT_XAxisTitleStartDate" FontSize="14" />
                                                                </Border>
                                                                <Border BorderBrush="Gray" Padding="3,1,3,1" BorderThickness="1,1,1,0" Grid.Column="2">
                                                                    <TextBlock Text="" x:Name="ELEMENT_XAxisTitleEndDate" HorizontalAlignment="Right" FontSize="14"/>
                                                                </Border>
                                                            </Grid>

                                                            <Canvas Grid.Row="1" Grid.Column="1" Canvas.ZIndex="10" Margin="1,0,0,0" x:Name="ELEMENT_dynamicMainLayerViewport"/>
                                                            <Canvas Visibility="Collapsed" Grid.Row="1" Grid.Column="1" Canvas.ZIndex="5" Margin="1,0,0,0" x:Name="ELEMENT_nonDynamicRightAxisViewPort">
                                                                <Canvas x:Name="ELEMENT_NonDynamicRightAxisLabels">
                                                                </Canvas>
                                                                <Canvas x:Name="ELEMENT_NonDynamicRightAxisLines">
                                                                </Canvas>
                                                            </Canvas>
                                                            <Border Grid.Row="1" Grid.RowSpan="2" Grid.Column="1" Opacity="0.5"
                                                                    BorderThickness="1,0,1,0" BorderBrush="{StaticResource Control_BorderBrush_Brush}" />

                                                            <ScrollBar  Visibility="Collapsed" Grid.Row="2" Margin="2,2,2,2" Orientation="Vertical" Grid.Column="2" Minimum="-155" Maximum="155" Value="0" SmallChange="5" LargeChange="10" x:Name="ELEMENT_scrollBarVertical"/>
                                                            <ScrollBar  Visibility="Visible" Margin="2,2,2,2" Grid.Row="3" x:Name="ELEMENT_scrollBar"/>

                                                        </Grid>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>

                                    <Style TargetType="local:VisualFocusLine" x:Key="NowIndicator">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate>
                                                    <Canvas x:Name="ELEMENT_VisualFocusLineCanvas" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Canvas.ZIndex="10">
                                                        <Border x:Name="ELEMENT_TopPlaceHolder" Canvas.ZIndex="1" 
                                                                Background="#FFFFA500" BorderBrush="#FFEC9900" BorderThickness="1" Padding="2,0,2,0">
                                                            <TextBlock x:Name="ELEMENT_TopDateTimeTextBlock" Foreground="Black"  />
                                                        </Border>

                                                        <Rectangle x:Name="FocusVisualElement" Margin="0,0,0,0" Width="0" Fill="#FF448DCA" Opacity="0.0" Visibility="Collapsed" />
                                                        <Line x:Name="ELEMENT_VisualFocusLine" Margin="0,0,0,0" Stroke="#FFEC9900" StrokeThickness="1"/>

                                                        <Border x:Name="ELEMENT_BottomPlaceHolder" Canvas.ZIndex="2" Background="#FFFFA500" 
                                                                BorderBrush="#FFEC9900" BorderThickness="1" Padding="2,0,2,0">
                                                            <TextBlock x:Name="ELEMENT_BottomDateTimeTextBlock" Foreground="Black" />
                                                        </Border>
                                                    </Canvas>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>

                                    <Style TargetType="Control" x:Key="BaseControlStyle">
                                        <Setter Property="BorderThickness" Value="1,1,1,1" />
                                        <Setter Property="Background" Value="{StaticResource Control_Background_Brush}" />
                                        <Setter Property="Foreground" Value="{StaticResource Control_Foreground_Brush}" />
                                        <Setter Property="BorderBrush" Value="{StaticResource Control_BorderBrush_Brush}" />
                                    </Style>

                                    <SolidColorBrush x:Key="ItemMouseOver_BorderBrush_Brush" Color="#FFCAECFC" />
                                    <LinearGradientBrush x:Key="ItemMouseOver_Background_Brush" EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FFF9FDFF"/>
                                        <GradientStop Color="#FFCAECFC" Offset="1"/>
                                        <GradientStop Color="#FFC5EDFF" Offset="0.75"/>
                                        <GradientStop Color="#FFD3EFFC" Offset="0.7"/>                                        
                                    </LinearGradientBrush>

                                    <SolidColorBrush x:Key="ItemFocused_BorderBrush_Brush" Color="#FFB3DCF0" />
                                    <LinearGradientBrush x:Key="ItemFocused_Background_Brush" EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FFF9FDFF"/>
                                        <GradientStop Color="#FFB3DCF0" Offset="1"/>
                                        <GradientStop Color="#FFACDBF0" Offset="0.75"/>
                                        <GradientStop Color="#FFBBE0F2" Offset="0.7"/>                                        
                                    </LinearGradientBrush>

                                    <SolidColorBrush x:Key="ItemSelected_BorderBrush_Brush" Color="#FFF2A71E" />
                                    <LinearGradientBrush x:Key="ItemSelected_Background_Brush" EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FFFFEDCB" Offset="0"/>
                                        <GradientStop Color="#FFFFB122" Offset="1"/>
                                        <GradientStop Color="#FFFFBF4A" Offset="0.75"/>
                                        <GradientStop Color="#FFFFBF4A" Offset="0.7"/>                                        
                                    </LinearGradientBrush>

                                    <SolidColorBrush x:Key="MouseOverItemSelected_BorderBrush_Brush" Color="#FFE49E1D" />
                                    <LinearGradientBrush x:Key="MouseOverItemSelected_Background_Brush" EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FFFFE1A9" Offset="0.004"/>
                                        <GradientStop Color="#FFFFAD16" Offset="1"/>
                                        <GradientStop Color="#FFFFBF4A" Offset="0.75"/>
                                        <GradientStop Color="#FFFFBF4A" Offset="0.7"/>                                        
                                    </LinearGradientBrush>

                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0" x:Key="ColumnHeader_Background_Brush">
                                        <GradientStop Color="#FFF9FDFF"/>
                                        <GradientStop Color="#FFCAECFC" Offset="1"/>
                                        <GradientStop Color="#FFC5EDFF" Offset="0.75"/>
                                        <GradientStop Color="#FFD3EFFC" Offset="0.7"/>
                                    </LinearGradientBrush>

                                    <Style x:Key="TimelineScrollBarStyle" TargetType="ScrollBar">
                                        <Setter Property="MinWidth" Value="17"/>
                                        <Setter Property="MinHeight" Value="17"/>
                                        <Setter Property="IsTabStop" Value="False"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ScrollBar">
                                                    <Grid x:Name="Root">
                                                        <Grid.Resources>
                                                            <ControlTemplate x:Key="RepeatButtonTemplate" TargetType="RepeatButton">
                                                                <Grid x:Name="Root">
                                                                    <VisualStateManager.VisualStateGroups>
                                                                        <VisualStateGroup x:Name="CommonStates">
                                                                            <VisualState x:Name="Normal"/>
                                                                            <VisualState x:Name="MouseOver">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="Background" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                            <VisualState x:Name="Pressed">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="Background" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="PressedBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                            <VisualState x:Name="Disabled">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="DisabledElement" Storyboard.TargetProperty="Opacity">
                                                                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value=".7"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                        </VisualStateGroup>
                                                                    </VisualStateManager.VisualStateGroups>
                                                                    <Rectangle x:Name="Background" Fill="{TemplateBinding Background}" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="1" Opacity="0"/>
                                                                    <Rectangle x:Name="MouseOverBorder" Fill="{StaticResource ItemMouseOver_Background_Brush}" Margin="1" Opacity="0"/>
                                                                    <ContentPresenter x:Name="contentPresenter" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RenderTransformOrigin="0.5,0.5" >
                                                                        <ContentPresenter.RenderTransform>
                                                                            <TransformGroup>
                                                                                <ScaleTransform/>
                                                                                <SkewTransform/>
                                                                                <RotateTransform/>
                                                                                <TranslateTransform/>
                                                                            </TransformGroup>
                                                                        </ContentPresenter.RenderTransform>
                                                                    </ContentPresenter>
                                                                    <Border x:Name="PressedBorder" Margin="1" Opacity="0">
                                                                        <Grid>
                                                                            <Rectangle Height="3" VerticalAlignment="Top">
                                                                                <Rectangle.Fill>
                                                                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                                                                        <GradientStop Color="#44000000" Offset="0"/>
                                                                                        <GradientStop Offset="1"/>
                                                                                    </LinearGradientBrush>
                                                                                </Rectangle.Fill>
                                                                            </Rectangle>
                                                                            <Rectangle HorizontalAlignment="Left" Width="3">
                                                                                <Rectangle.Fill>
                                                                                    <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
                                                                                        <GradientStop Color="#44000000" Offset="0"/>
                                                                                        <GradientStop Offset="1"/>
                                                                                    </LinearGradientBrush>
                                                                                </Rectangle.Fill>
                                                                            </Rectangle>
                                                                        </Grid>
                                                                    </Border>
                                                                    <Rectangle x:Name="DisabledElement" Fill="#FFFFFFFF" Opacity="0"/>
                                                                </Grid>
                                                            </ControlTemplate>
                                                            <ControlTemplate x:Key="FadedRepeatButtonTemplate" TargetType="RepeatButton">
                                                                <Grid x:Name="Root">
                                                                    <VisualStateManager.VisualStateGroups>
                                                                        <VisualStateGroup x:Name="CommonStates">
                                                                            <VisualState x:Name="Normal"/>
                                                                            <VisualState x:Name="MouseOver">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="Background" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.3"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.3"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                            <VisualState x:Name="Pressed">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="Background" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.3"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="PressedBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.3"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                            <VisualState x:Name="Disabled">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="DisabledElement" Storyboard.TargetProperty="Opacity">
                                                                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value=".7"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                        </VisualStateGroup>
                                                                    </VisualStateManager.VisualStateGroups>
                                                                    <Rectangle x:Name="Background" Fill="{TemplateBinding Background}" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="1" Opacity="0"/>
                                                                    <Rectangle x:Name="MouseOverBorder" Fill="{StaticResource ItemMouseOver_Background_Brush}" Margin="1" Opacity="0"/>
                                                                    <ContentPresenter x:Name="contentPresenter" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RenderTransformOrigin="0.5,0.5" >
                                                                        <ContentPresenter.RenderTransform>
                                                                            <TransformGroup>
                                                                                <ScaleTransform/>
                                                                                <SkewTransform/>
                                                                                <RotateTransform/>
                                                                                <TranslateTransform/>
                                                                            </TransformGroup>
                                                                        </ContentPresenter.RenderTransform>
                                                                    </ContentPresenter>
                                                                    <Border x:Name="PressedBorder" Margin="1" Opacity="0">
                                                                        <Grid>
                                                                            <Rectangle Height="3" VerticalAlignment="Top">
                                                                                <Rectangle.Fill>
                                                                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                                                                        <GradientStop Color="#44000000" Offset="0"/>
                                                                                        <GradientStop Offset="1"/>
                                                                                    </LinearGradientBrush>
                                                                                </Rectangle.Fill>
                                                                            </Rectangle>
                                                                            <Rectangle HorizontalAlignment="Left" Width="3">
                                                                                <Rectangle.Fill>
                                                                                    <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
                                                                                        <GradientStop Color="#44000000" Offset="0"/>
                                                                                        <GradientStop Offset="1"/>
                                                                                    </LinearGradientBrush>
                                                                                </Rectangle.Fill>
                                                                            </Rectangle>
                                                                        </Grid>
                                                                    </Border>
                                                                    <Rectangle x:Name="DisabledElement" Fill="#FFFFFFFF" Opacity="0"/>
                                                                </Grid>
                                                            </ControlTemplate>
                                                            <ControlTemplate x:Key="VerticalThumbTemplate" TargetType="Thumb">
                                                                <Grid>
                                                                    <VisualStateManager.VisualStateGroups>
                                                                        <VisualStateGroup x:Name="CommonStates">
                                                                            <VisualState x:Name="Normal"/>
                                                                            <VisualState x:Name="MouseOver">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                            <VisualState x:Name="Pressed">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="PressedBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="canvas" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="canvas" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                            <VisualState x:Name="Disabled">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ThumbVisual" Storyboard.TargetProperty="Opacity">
                                                                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                        </VisualStateGroup>
                                                                    </VisualStateManager.VisualStateGroups>
                                                                    <Grid x:Name="ThumbVisual" Margin="1,1,1,1">
                                                                        <Rectangle x:Name="Background" Fill="{TemplateBinding Background}" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="1"/>
                                                                        <Rectangle x:Name="MouseOverBorder" Fill="{StaticResource ItemMouseOver_Background_Brush}" Margin="1" Opacity="0"/>
                                                                        <Canvas x:Name="canvas" Height="5" Width="8" VerticalAlignment="Center" HorizontalAlignment="Center" RenderTransformOrigin="0.5,0.5">
                                                                            <Canvas.RenderTransform>
                                                                                <TransformGroup>
                                                                                    <ScaleTransform/>
                                                                                    <SkewTransform/>
                                                                                    <RotateTransform/>
                                                                                    <TranslateTransform/>
                                                                                </TransformGroup>
                                                                            </Canvas.RenderTransform>
                                                                            <Path Stretch="Fill" Stroke="{TemplateBinding BorderBrush}" Height="1" Width="8" Data="M0,0 L1,0" StrokeStartLineCap="Square" StrokeEndLineCap="Square"/>
                                                                            <Path Stretch="Fill" Stroke="{TemplateBinding BorderBrush}" Height="1" Width="8" Data="M0,0 L1,0" StrokeEndLineCap="Square" StrokeStartLineCap="Square" Canvas.Top="2"/>
                                                                            <Path Stretch="Fill" Stroke="{TemplateBinding BorderBrush}" Height="1" Width="8" Data="M0,0 L1,0" StrokeEndLineCap="Square" StrokeStartLineCap="Square" Canvas.Top="4"/>
                                                                        </Canvas>
                                                                        <Border x:Name="PressedBorder" Margin="1" Opacity="0">
                                                                            <Grid>
                                                                                <Rectangle Height="3" VerticalAlignment="Top">
                                                                                    <Rectangle.Fill>
                                                                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                                                                            <GradientStop Color="#44000000" Offset="0"/>
                                                                                            <GradientStop Offset="1"/>
                                                                                        </LinearGradientBrush>
                                                                                    </Rectangle.Fill>
                                                                                </Rectangle>
                                                                                <Rectangle HorizontalAlignment="Left" Width="3">
                                                                                    <Rectangle.Fill>
                                                                                        <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
                                                                                            <GradientStop Color="#44000000" Offset="0"/>
                                                                                            <GradientStop Offset="1"/>
                                                                                        </LinearGradientBrush>
                                                                                    </Rectangle.Fill>
                                                                                </Rectangle>
                                                                            </Grid>
                                                                        </Border>
                                                                    </Grid>
                                                                </Grid>
                                                            </ControlTemplate>

                                                            <ControlTemplate x:Key="HorizontalThumbTemplate" TargetType="Thumb">
                                                                <Grid>
                                                                    <VisualStateManager.VisualStateGroups>
                                                                        <VisualStateGroup x:Name="CommonStates">
                                                                            <VisualState x:Name="Normal"/>
                                                                            <VisualState x:Name="MouseOver">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                            <VisualState x:Name="Pressed">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="PressedBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="canvas" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)">
                                                                                        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                            <VisualState x:Name="Disabled">
                                                                                <Storyboard>
                                                                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ThumbVisual" Storyboard.TargetProperty="Opacity">
                                                                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                                                                                    </DoubleAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </VisualState>
                                                                        </VisualStateGroup>
                                                                    </VisualStateManager.VisualStateGroups>
                                                                    <Grid x:Name="ThumbVisual" Margin="1,1,1,1">
                                                                        <Rectangle x:Name="Background" Fill="{TemplateBinding Background}" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="1"/>
                                                                        <Rectangle x:Name="MouseOverBorder" Fill="{StaticResource ItemMouseOver_Background_Brush}" Margin="1" Opacity="0"/>
                                                                        <Canvas x:Name="canvas" Height="8" HorizontalAlignment="Center" VerticalAlignment="Center" Width="5" RenderTransformOrigin="0.5,0.5">
                                                                            <Canvas.RenderTransform>
                                                                                <TransformGroup>
                                                                                    <ScaleTransform/>
                                                                                    <SkewTransform/>
                                                                                    <RotateTransform/>
                                                                                    <TranslateTransform/>
                                                                                </TransformGroup>
                                                                            </Canvas.RenderTransform>
                                                                            <Path Stretch="Fill" Stroke="{TemplateBinding BorderBrush}" Height="8" Width="1" Data="M0,0 L0,1" StrokeStartLineCap="Square" StrokeEndLineCap="Square" Canvas.Top="0"/>
                                                                            <Path Stretch="Fill" Stroke="{TemplateBinding BorderBrush}" Height="8" Width="1" Data="M0,0 L0,1" StrokeEndLineCap="Square" StrokeStartLineCap="Square" Canvas.Top="0" Canvas.Left="2"/>
                                                                            <Path Stretch="Fill" Stroke="{TemplateBinding BorderBrush}" Height="8" Width="1" Data="M0,0 L0,1" StrokeEndLineCap="Square" StrokeStartLineCap="Square" Canvas.Top="0" Canvas.Left="4"/>
                                                                        </Canvas>
                                                                        <Border x:Name="PressedBorder" Margin="1" Opacity="0">
                                                                            <Grid>
                                                                                <Rectangle Height="3" VerticalAlignment="Top">
                                                                                    <Rectangle.Fill>
                                                                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                                                                            <GradientStop Color="#44000000" Offset="0"/>
                                                                                            <GradientStop Offset="1"/>
                                                                                        </LinearGradientBrush>
                                                                                    </Rectangle.Fill>
                                                                                </Rectangle>
                                                                                <Rectangle HorizontalAlignment="Left" Width="3">
                                                                                    <Rectangle.Fill>
                                                                                        <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
                                                                                            <GradientStop Color="#44000000" Offset="0"/>
                                                                                            <GradientStop Offset="1"/>
                                                                                        </LinearGradientBrush>
                                                                                    </Rectangle.Fill>
                                                                                </Rectangle>
                                                                            </Grid>
                                                                        </Border>
                                                                    </Grid>
                                                                </Grid>
                                                            </ControlTemplate>

                                                        </Grid.Resources>
                                                        <VisualStateManager.VisualStateGroups>
                                                            <VisualStateGroup x:Name="CommonStates">
                                                                <VisualState x:Name="Normal"/>
                                                                <VisualState x:Name="MouseOver"/>
                                                                <VisualState x:Name="Disabled">
                                                                    <Storyboard>
                                                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="Root" Storyboard.TargetProperty="Opacity">
                                                                            <SplineDoubleKeyFrame KeyTime="0" Value="0.5"/>
                                                                        </DoubleAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                        </VisualStateManager.VisualStateGroups>
                                                        <Grid x:Name="HorizontalRoot">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>
                                                            <Rectangle Fill="{TemplateBinding Background}" Stroke="{TemplateBinding BorderBrush}" Grid.ColumnSpan="5"/>
                                                            <RepeatButton x:Name="HorizontalSmallDecrease" Margin="2,2,1,2" Style="{StaticResource BaseControlStyle}" Width="16" IsTabStop="False" Template="{StaticResource RepeatButtonTemplate}" Grid.Column="0" Interval="100">
                                                                <Path Fill="{TemplateBinding Foreground}" Stretch="Uniform" Height="8" Width="4" Data="F1 M 110.692,342.252L 110.692,352.682L 104.594,347.467L 110.692,342.252 Z "/>
                                                            </RepeatButton>
                                                            <RepeatButton x:Name="HorizontalLargeDecrease" Style="{StaticResource BaseControlStyle}" Width="0" IsTabStop="False" Template="{StaticResource FadedRepeatButtonTemplate}" Grid.Column="1" Interval="100"/>
                                                            <Thumb x:Name="HorizontalThumb" Margin="0,1" MinWidth="18" Style="{StaticResource BaseControlStyle}" Width="18" Background="{TemplateBinding Background}" Template="{StaticResource HorizontalThumbTemplate}" Grid.Column="2"/>
                                                            <RepeatButton x:Name="HorizontalLargeIncrease" Style="{StaticResource BaseControlStyle}" IsTabStop="False" Template="{StaticResource FadedRepeatButtonTemplate}" Grid.Column="3" Interval="100"/>
                                                            <RepeatButton x:Name="HorizontalSmallIncrease" Margin="1,2,2,2" Style="{StaticResource BaseControlStyle}" Width="16" IsTabStop="False" Template="{StaticResource RepeatButtonTemplate}" Grid.Column="4" Interval="100">
                                                                <Path Fill="{TemplateBinding Foreground}" Stretch="Uniform" Height="8" Width="4" Data="F1 M 511.047,352.682L 511.047,342.252L 517.145,347.467L 511.047,352.682 Z "/>
                                                            </RepeatButton>
                                                        </Grid>
                                                        <Grid x:Name="VerticalRoot" Visibility="Collapsed">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto"/>
                                                                <RowDefinition Height="Auto"/>
                                                                <RowDefinition Height="Auto"/>
                                                                <RowDefinition Height="*"/>
                                                                <RowDefinition Height="Auto"/>
                                                            </Grid.RowDefinitions>
                                                            <Rectangle Fill="{TemplateBinding Background}" Stroke="{TemplateBinding BorderBrush}" Margin="0" Grid.RowSpan="5"/>
                                                            <RepeatButton x:Name="VerticalSmallDecrease" Height="16" Margin="2,2,2,1" Style="{StaticResource BaseControlStyle}" IsTabStop="False" Template="{StaticResource RepeatButtonTemplate}" Grid.Row="0" Interval="50">
                                                                <Path Fill="{TemplateBinding Foreground}" Stretch="Uniform" Height="4" Width="8" Data="F1 M 541.537,173.589L 531.107,173.589L 536.322,167.49L 541.537,173.589 Z "/>
                                                            </RepeatButton>
                                                            <RepeatButton x:Name="VerticalLargeDecrease" Height="0" Style="{StaticResource BaseControlStyle}" IsTabStop="False" Template="{StaticResource FadedRepeatButtonTemplate}" Grid.Row="1" Interval="50"/>
                                                            <Thumb x:Name="VerticalThumb" Height="18" Margin="1,0" MinHeight="18" Style="{StaticResource BaseControlStyle}" Template="{StaticResource VerticalThumbTemplate}" Grid.Row="2"/>
                                                            <RepeatButton x:Name="VerticalLargeIncrease" Style="{StaticResource BaseControlStyle}" IsTabStop="False" Template="{StaticResource FadedRepeatButtonTemplate}" Grid.Row="3" Interval="50"/>
                                                            <RepeatButton x:Name="VerticalSmallIncrease" Height="16" Margin="2,1,2,2" Style="{StaticResource BaseControlStyle}" IsTabStop="False" Template="{StaticResource RepeatButtonTemplate}" Grid.Row="4" Interval="50">
                                                                <Path Fill="{TemplateBinding Foreground}" Stretch="Uniform" Height="4" Width="8" Data="F1 M 531.107,321.943L 541.537,321.943L 536.322,328.042L 531.107,321.943 Z "/>
                                                            </RepeatButton>
                                                        </Grid>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>

                                    <Style x:Key="TimelineScrollViewerStyle" TargetType="ScrollViewer">
                                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                        <Setter Property="VerticalContentAlignment" Value="Top"/>
                                        <Setter Property="VerticalScrollBarVisibility" Value="Visible"/>
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ScrollViewer">
                                                    <Grid>
                                                        <VisualStateManager.VisualStateGroups>
                                                            <VisualStateGroup x:Name="ControlStates">
                                                                <VisualState x:Name="Focused">
                                                                    <Storyboard>
                                                                        <DoubleAnimation Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="Opacity"
                                                         Duration="00:00:00" To="1" />
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="Unfocused">
                                                                    <Storyboard>
                                                                        <DoubleAnimation Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="Opacity"
                                                         Duration="00:00:00" To="0" />
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                        </VisualStateManager.VisualStateGroups>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*"/>
                                                            <RowDefinition Height="Auto"/>
                                                        </Grid.RowDefinitions>
                                                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}"
										Grid.RowSpan="2" Grid.ColumnSpan="2" Padding="0" Margin="0" />
                                                        <ScrollContentPresenter x:Name="ScrollContentPresenter" Cursor="{TemplateBinding Cursor}" Margin="{TemplateBinding Padding}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
                                                        <Rectangle Fill="White" Grid.Column="1" Grid.Row="1" Opacity="0"/>
                                                        <ScrollBar x:Name="VerticalScrollBar" Style="{StaticResource TimelineScrollBarStyle}" Width="18" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" IsTabStop="False" Grid.Column="1" Grid.Row="0" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0" Value="{TemplateBinding VerticalOffset}" Orientation="Vertical" ViewportSize="{TemplateBinding ViewportHeight}" BorderBrush="{StaticResource Control_BorderBrush_Brush}"
                                                   BorderThickness="1,0,0,0" Margin="0,-2,-1,-1" />
                                                        <ScrollBar x:Name="HorizontalScrollBar" Height="17" Style="{StaticResource TimelineScrollBarStyle}" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" IsTabStop="False" Grid.Column="0" Grid.Row="1" Maximum="{TemplateBinding ScrollableWidth}" Minimum="0" Value="{TemplateBinding HorizontalOffset}" Orientation="Horizontal" ViewportSize="{TemplateBinding ViewportWidth}"/>
                                                        <Rectangle Grid.RowSpan="2" Grid.ColumnSpan="2" x:Name="FocusVisualElement" Opacity="0" IsHitTestVisible="False" StrokeThickness="1" Stroke="Black" StrokeDashArray="1 2" />
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>

                                    <Style x:Key="ToolbarButton_Style" TargetType="Button">
                                        <Setter Property="Padding" Value="8,4,8,4" />
                                        <Setter Property="Foreground" Value="White" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Grid>
                                                        <VisualStateManager.VisualStateGroups>
                                                            <VisualStateGroup x:Name="FocusStates">
                                                                <VisualState x:Name="Focused">
                                                                    <Storyboard>
                                                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="FocusBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                        </DoubleAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="Unfocused">
                                                                    <Storyboard>
                                                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.2" Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2" Value="0"/>
                                                                        </DoubleAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                            <VisualStateGroup x:Name="CommonStates">
                                                                <VisualState x:Name="Normal">
                                                                    <Storyboard>
                                                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.2" Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2" Value="0"/>
                                                                        </DoubleAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="MouseOver">
                                                                    <Storyboard>
                                                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                        </DoubleAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="Pressed">
                                                                    <Storyboard>
                                                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="PressedBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                        </DoubleAnimationUsingKeyFrames>
                                                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="ContentPresenterTranslateTransform" Storyboard.TargetProperty="(TranslateTransform.X)">
                                                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                        </DoubleAnimationUsingKeyFrames>
                                                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="ContentPresenterTranslateTransform" Storyboard.TargetProperty="(TranslateTransform.Y)">
                                                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                                                        </DoubleAnimationUsingKeyFrames>
                                                                        <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetName="FocusBorder" Storyboard.TargetProperty="Visibility">
                                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                                <DiscreteObjectKeyFrame.Value>
                                                                                    <Visibility>Collapsed</Visibility>
                                                                                </DiscreteObjectKeyFrame.Value>
                                                                            </DiscreteObjectKeyFrame>
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="Disabled">
                                                                    <Storyboard>
                                                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.3"/>
                                                                        </DoubleAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                        </VisualStateManager.VisualStateGroups>
                                                        <Border>
                                                            <Grid>
                                                                <Rectangle x:Name="MouseOverBorder" Fill="{StaticResource ToolbarButton_MouseOverBackground_Brush}" Stroke="{StaticResource ToolbarButton_BorderBrush_Brush}" StrokeThickness="1" Opacity="0"/>
                                                                <Rectangle x:Name="PressedBorder" Fill="{StaticResource ToolbarButton_PressedBackground_Brush}" Stroke="{StaticResource ToolbarButton_BorderBrush_Brush}" StrokeThickness="1" Opacity="0"/>
                                                                <Rectangle x:Name="FocusBorder" Stroke="White" StrokeDashArray="2 2" Margin="1" Opacity="0"/>
                                                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
										Margin="{TemplateBinding Padding}" x:Name="ContentPresenter">
                                                                    <ContentPresenter.RenderTransform>
                                                                        <TranslateTransform x:Name="ContentPresenterTranslateTransform" />
                                                                    </ContentPresenter.RenderTransform>
                                                                </ContentPresenter>
                                                            </Grid>
                                                        </Border>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                    
                                    <DataTemplate x:Key="DefaultSectionTemplate">
                                        <Border BorderThickness="1" BorderBrush="{StaticResource Control_BorderBrush_Brush}">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="*"  />
                                                </Grid.RowDefinitions>                                              
                                                <Border Grid.Column="0" CornerRadius="1" Background="{StaticResource SectionHeader_Background_Brush}">
                                                        <TextBlock Margin="5,0,0,0" Text="{Binding SectionName}" FontWeight="Bold" Grid.Column="0"
                                                                   VerticalAlignment="Center" Foreground="{StaticResource SectionHeader_Foreground_Brush}"/>                                                        
                                                    
                                                </Border>
                                                <Grid Background="White" Grid.Row="1" x:Name="GraphArea">
                                                    <ScrollViewer x:Name="ScrollViewer" Padding="0" Style="{StaticResource TimelineScrollViewerStyle}" BorderThickness="0">
                                                        <ItemsControl x:Name="ItemsControl" ItemsSource="{Binding Graphs}" IsTabStop="False" />                                                           
                                                    </ScrollViewer>
                                                    <Border Width="185" VerticalAlignment="Stretch" HorizontalAlignment="Left" BorderThickness="1,0,1,0" BorderBrush="Black" Padding="5" />
                                                </Grid>                                                
                                            </Grid>
                                        </Border>
                                    </DataTemplate>

                                    <Storyboard x:Key="LoadingAnimation" RepeatBehavior="Forever">
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ellipse1" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="0.66"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4000000" Value="0.33"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.8000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.6000000" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ellipse2" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4000000" Value="0.66"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0.33"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.8000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.6000000" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ellipse3" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4000000" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0.66"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.8000000" Value="0.33"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.6000000" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ellipse4" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.6000000" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.8000000" Value="0.66"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01" Value="0.33"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.6000000" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ellipse5" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.8000000" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01" Value="0.66"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.2000000" Value="0.33"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.6000000" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ellipse6" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.8000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.2000000" Value="0.66"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.4000000" Value="0.33"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.6000000" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ellipse7" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.33"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.8000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.2000000" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.4000000" Value="0.66"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.6000000" Value="0.33"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ellipse8" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.655"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="0.33"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.8000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.2000000" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.4000000" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="00:00:01.6000000" Value="0.66"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </Grid.Resources>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- Graph Title Area -->
                                <Border x:Name="ELEMENT_TitleFormatTimeGrid" Padding="5,10" BorderThickness="0,0,0,1"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        >
                                    <Border.Background>
                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                            <GradientStop Color="#FFB0CBDA" Offset="0"/>
                                            <GradientStop Color="#FF005788" Offset="1"/>
                                            <GradientStop Color="#FF075B8B" Offset="0.634"/>
                                            <GradientStop Color="#FE5992B1" Offset="0.323"/>
                                            <GradientStop Color="#FE76A5BE" Offset="0.185"/>
                                        </LinearGradientBrush>
                                    </Border.Background>

                                    <!-- Buttons and Timeselector -->
                                    <Grid VerticalAlignment="Center" x:Name="ELEMENT_FormatGrid">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Grid.Column="0">
                                            <StackPanel.Resources>
                                                <local:TimeFrequencyCollection x:Key="tfc">
                                                    <local:TimeFrequency Unit="Minute" Value="5"/>
                                                    <local:TimeFrequency Unit="Minute" Value="15"/>
                                                    <local:TimeFrequency Unit="Hour" Value="1"/>
                                                    <local:TimeFrequency Unit="Hour" Value="2"/>
                                                    <local:TimeFrequency Unit="Hour" Value="4"/>
                                                    <local:TimeFrequency Unit="Hour" Value="6"/>
                                                    <local:TimeFrequency Unit="Hour" Value="12"/>
                                                    <local:TimeFrequency Unit="Hour" Value="24"/>
                                                    <local:TimeFrequency Unit="Hour" Value="48"/>
                                                    <local:TimeFrequency Unit="Day" Value="5"/>
                                                    <local:TimeFrequency Unit="Day" Value="10"/>
                                                    <local:TimeFrequency Unit="Day" Value="15"/>
                                                    <local:TimeFrequency Unit="Day" Value="20"/>
                                                    <local:TimeFrequency Unit="Month" Value="1"/>
                                                    <local:TimeFrequency Unit="Month" Value="3"/>
                                                    <local:TimeFrequency Unit="Month" Value="6"/>
                                                    <local:TimeFrequency Unit="Month" Value="9"/>
                                                    <local:TimeFrequency Unit="Month" Value="12"/>
                                                    <local:TimeFrequency Unit="Month" Value="18"/>
                                                    <local:TimeFrequency Unit="Year" Value="2"/>
                                                    <local:TimeFrequency Unit="Year" Value="5"/>
                                                    <local:TimeFrequency Unit="Year" Value="10"/>
                                                    <local:TimeFrequency Unit="Year" Value="20"/>
                                                    <local:TimeFrequency Unit="Year" Value="100"/>
                                                </local:TimeFrequencyCollection>
                                            </StackPanel.Resources>

                                            <TextBlock Text="Period" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="5,0,0,0" FontSize="11"/>
                                            <ComboBox VerticalAlignment="Center" Margin="5,0,5,0" Width="120" Height="25" FontSize="12"
                                              x:Name="ELEMENT_TimeSelector" VerticalContentAlignment="Center" HorizontalContentAlignment="Left" 
                                              ItemsSource="{Binding Source={StaticResource tfc}}"                                               
                                              SelectedItem="{Binding TimeFrequency, Source={StaticResource timeFrequency}, Mode=TwoWay}"
                                                      >
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Description}" />
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>
                                        </StackPanel>

                                        <StackPanel Orientation="Horizontal" Grid.Column="1" HorizontalAlignment="Right">
                                            <Button x:Name="ELEMENT_ScrollToNow" HorizontalAlignment="Right" VerticalAlignment="Stretch" ToolTipService.ToolTip="Scroll to the current time" Style="{StaticResource ToolbarButton_Style}">
                                                <Button.Content>
                                                    <StackPanel Orientation="Horizontal">
                                                        <Grid Height="17" HorizontalAlignment="Left" VerticalAlignment="Top" Width="12">
                                                            <Path Stretch="Fill" Stroke="#FFE4E4E4" StrokeEndLineCap="Round" StrokeLineJoin="Round" StrokeStartLineCap="Round" Margin="0,0,0,1" Data="M52.589622,79.760414 L52.527191,89.333008 L47.974781,89.322914 L54.601536,95.125229 L60.624207,89.302101 L56.019451,89.281265 L55.967445,79.791336 z"/>
                                                            <Path Stretch="Fill" Stroke="#FFE4E4E4" StrokeEndLineCap="Round" StrokeLineJoin="Round" StrokeStartLineCap="Round" Height="1" Margin="2.202,0,1.798,0" VerticalAlignment="Bottom" Data="M109.5,146.214 L116.25,146.214"/>
                                                        </Grid>

                                                        <TextBlock Text="Jump to Now" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5,0,0,0" />
                                                    </StackPanel>
                                                </Button.Content>
                                            </Button>
                                            <Button x:Name="ELEMENT_Reset" HorizontalAlignment="Right" VerticalAlignment="Stretch" Margin="10,0" ToolTipService.ToolTip="Reset the timeline to the default view" Style="{StaticResource ToolbarButton_Style}">
                                                <Button.Content>
                                                    <StackPanel Orientation="Horizontal">
                                                        <Grid Height="11" HorizontalAlignment="Left" VerticalAlignment="Top" Width="16">
                                                            <Path Stretch="Fill" Stroke="#FFE4E4E4" StrokeDashCap="Round" StrokeEndLineCap="Round" StrokeLineJoin="Round" StrokeStartLineCap="Round" Margin="0.999,0,-0.41,0.531" Data="M83.666664,134.08333 L78.458,136.41701 L79.083,134.12534 C76.698044,132.82683 74.556328,133.42589 72.583,135.62512 C72.791656,132.62573 75.973549,130.89413 79.833107,131.37572 L80.416428,129.20935 z" RenderTransformOrigin="0.5,0.5">
                                                                <Path.RenderTransform>
                                                                    <TransformGroup>
                                                                        <ScaleTransform ScaleX="-1"/>
                                                                        <SkewTransform AngleX="0" AngleY="0"/>
                                                                        <RotateTransform Angle="0"/>
                                                                        <TranslateTransform/>
                                                                    </TransformGroup>
                                                                </Path.RenderTransform>
                                                            </Path>
                                                            <Path Stretch="Fill" Stroke="#FFE4E4E4" StrokeEndLineCap="Round" StrokeLineJoin="Round" StrokeStartLineCap="Round" HorizontalAlignment="Left" Margin="0,2.664,0,0.336" Width="1" Data="M136.875,131.245 L136.875,146.578"/>
                                                        </Grid>
                                                        <TextBlock Text="Reset" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5,0,0,0" />
                                                    </StackPanel>
                                                </Button.Content>
                                            </Button>
                                            <Button x:Name="ELEMENT_Refresh" HorizontalAlignment="Right" VerticalAlignment="Stretch" Margin="10,0" ToolTipService.ToolTip="Refresh the timeline’s data and view" Style="{StaticResource ToolbarButton_Style}">
                                                <Button.Content>
                                                    <StackPanel Orientation="Horizontal">
                                                        <Grid Height="16" Width="12">
                                                            <Path Stretch="Fill" Stroke="#FFE4E4E4" StrokeDashCap="Round" StrokeEndLineCap="Round" StrokeLineJoin="Round" StrokeStartLineCap="Round" Height="8.209" Margin="0.583,0,0.333,0" VerticalAlignment="Top" Data="M83.666664,134.08333 L78.458,136.41701 L79.083,134.12534 C76.698044,132.82683 74.556328,133.42589 72.583,135.62512 C72.791656,132.62573 75.973549,130.89413 79.833107,131.37572 L80.416428,129.20935 z"/>
                                                            <Path Stretch="Fill" Stroke="#FFE4E4E4" StrokeDashCap="Round" StrokeEndLineCap="Round" StrokeLineJoin="Round" StrokeStartLineCap="Round" Margin="0,8.499,0.916,0.292" Data="M83.666664,134.08333 L78.458,136.41701 L79.083,134.12534 C76.698044,132.82683 74.556328,133.42589 72.583,135.62512 C72.791656,132.62573 75.973549,130.89413 79.833107,131.37572 L80.416428,129.20935 z" RenderTransformOrigin="0.5,0.5">
                                                                <Path.RenderTransform>
                                                                    <TransformGroup>
                                                                        <ScaleTransform/>
                                                                        <SkewTransform/>
                                                                        <RotateTransform Angle="180"/>
                                                                        <TranslateTransform/>
                                                                    </TransformGroup>
                                                                </Path.RenderTransform>
                                                            </Path>
                                                        </Grid>
                                                        <TextBlock Text="Refresh" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5,0,0,0" />
                                                    </StackPanel>
                                                </Button.Content>
                                            </Button>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Graph Area -->
                                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0,1,0,0" Grid.Row="1" Padding="3,0,3,0">
                                    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Row="1" x:Name="ELEMENT_GraphArea" Background="{TemplateBinding Background}">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="50"/>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="50"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- Visual Focus Line -->
                                        <local:VisualFocusLine x:Name="ELEMENT_VisualFocusLine" 
                                                               Visibility="Collapsed" 
                                                               Grid.Row="0" Grid.RowSpan="3" Canvas.ZIndex="99" 
                                                               IsTabStop="False"
                                                               Style="{StaticResource NowIndicator}"
                                                               AllowDragDrop="False"
                                                               Margin="188,1,0,1"
                                                               />

                                        <!-- Top Axis>-->
                                        <local:TimeLineGraph x:Name="ELEMENT_TopAxis" 
                                                             Margin="1,0,0,0"
                                                             Style="{StaticResource TopAxisStyle}"
                                                             PlotData="False" 
                                                             IsTabStop="False" 
                                                             Grid.Row="0"
                                                             />


                                        <!-- Graphs Collection -->
                                        <Border Grid.Row="1" BorderBrush="Black" BorderThickness="0" x:Name="ELEMENT_GraphPanel">
                                            <Grid x:Name="ELEMENT_RootPanel">
                                            </Grid>
                                        </Border>

                                        <!-- Bottom Axis -->
                                        <local:TimeLineGraph x:Name="ELEMENT_BottomAxis" 
                                                             Margin="1,0,0,0"
                                                             Style="{StaticResource BottomAxisStyle}"
                                                             PlotData="False" 
                                                             PlotTicksBeforeLabels="True" 
                                                             IsTabStop="False" 
                                                             Grid.Row="2"
                                                             />

                                        <!-- Horizontal Scrollbar -->
                                        <ScrollBar x:Name="ELEMENT_ScrollBar" 
                                                   Orientation="Horizontal" 
                                                   IsTabStop="True"
                                                   Margin="186,0,1,1"
                                                   Grid.Row="3"
                                                   Background="{StaticResource Control_Background_Brush}"
                                                   Style="{StaticResource TimelineScrollBarStyle}"
                                                   BorderBrush="{StaticResource Control_BorderBrush_Brush}"
                                                   BorderThickness="1"
                                                   />


                                        <!-- The Visual Focus Indicator for the Graphs -->
                                        <Rectangle Grid.Row="1" x:Name="FocusVisualElement" Opacity="0" IsHitTestVisible="False" StrokeThickness="1" Stroke="Black" StrokeDashArray="3 4" />

                                        <!-- The Visual Focus Indicator for the horizontal scrollbar -->
                                        <Rectangle Grid.Row="3" x:Name="ScrollBarFocusVisualElement" Opacity="0"  Margin="210,1,0,1" IsHitTestVisible="False" StrokeThickness="1" Stroke="Black" StrokeDashArray="2 3" />

                                    </Grid>
                                </Border>

                                <!-- Wait Content Area -->
                                <Border x:Name="WaitContent" Grid.RowSpan="2" 
                                        Background="White" Opacity="0"
                                        BorderBrush="Black" BorderThickness="1" CornerRadius="2"
                                        Canvas.ZIndex="100"
                                        IsHitTestVisible="False"
                                        Margin="2">
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">

                                        <Grid Height="90" Width="90" VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <Ellipse Stroke="{StaticResource EllipseStroke}" Fill="{StaticResource EllipseFill}" VerticalAlignment="Top" HorizontalAlignment="Center" Width="20" Height="20" x:Name="ellipse1" Opacity="1" />
                                            <Ellipse Stroke="{StaticResource EllipseStroke}" Fill="{StaticResource EllipseFill}" Height="20" VerticalAlignment="Top" HorizontalAlignment="Right" Width="20" Margin="0,10,10,0" x:Name="ellipse2" Opacity="0" />
                                            <Ellipse Stroke="{StaticResource EllipseStroke}" Fill="{StaticResource EllipseFill}" Height="20" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,0" Width="20" x:Name="ellipse3" Opacity="0" />
                                            <Ellipse Stroke="{StaticResource EllipseStroke}" Fill="{StaticResource EllipseFill}" HorizontalAlignment="Right" Margin="0,0,10,10" Width="20" VerticalAlignment="Bottom" Height="20" x:Name="ellipse4" Opacity="0" />
                                            <Ellipse Stroke="{StaticResource EllipseStroke}" Fill="{StaticResource EllipseFill}" HorizontalAlignment="Center" Margin="0,0,0,0" Width="20" Height="20" VerticalAlignment="Bottom" x:Name="ellipse5" Opacity="0" />
                                            <Ellipse Stroke="{StaticResource EllipseStroke}" Fill="{StaticResource EllipseFill}" Margin="10,0,0,10" Height="20" VerticalAlignment="Bottom" HorizontalAlignment="Left" Width="20" x:Name="ellipse6" Opacity="0" />
                                            <Ellipse Stroke="{StaticResource EllipseStroke}" Fill="{StaticResource EllipseFill}" Margin="0,0,0,0" Height="20" VerticalAlignment="Center" HorizontalAlignment="Left" Width="20" x:Name="ellipse7" Opacity="0.33" />
                                            <Ellipse Stroke="{StaticResource EllipseStroke}" Fill="{StaticResource EllipseFill}" Margin="10,10,0,0" Height="20" VerticalAlignment="Top" HorizontalAlignment="Left" Width="20" x:Name="ellipse8" Opacity="0.66" />
                                        </Grid>

                                        <TextBlock Text="Loading" HorizontalAlignment="Center" Margin="0,10,0,0" />
                                    </StackPanel>

                                </Border>
                            </Grid>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!-- End Time Activity GraphHost -->
</ResourceDictionary>
